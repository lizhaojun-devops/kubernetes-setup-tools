#!/usr/bin/bash
#所有主机的root用户密码,建议设置为统一的密码
export ROOT_PWD="123456"
#需要升级的内核版本
export Kernel_Version="4.18.9-1"
#安装k8s的版本(可安装的版本在ftp://172.19.2.252下可以看到,常用的版本已经下载下来了)
export KUBE_VERSION="v1.14.2"
#安装etcd的版本
export ETCD_VERSION="v3.3.18"
#安装flannel的版本
export FLANNEL_VERSION="v0.11.0"
#安装nginx的版本
export NGINX_VERSION="1.14.2"
# 集群各机器 IP 数组
export NODE_IPS=( 10.100.4.21 10.100.4.22 10.100.4.23 10.100.4.24 10.100.4.25 )
# 集群各 IP 对应的主机名数组 
export NODE_NAMES=( k8s-master1 k8s-master2 k8s-master3 k8s-node1 k8s-node2 )
# 集群用来管理的节点
export OPS_HOST=`echo ${NODE_NAMES[@]} | cut -d " " -f 1`
# 集群MASTER机器 IP 数组
export MASTER_IPS=( 10.100.4.21 10.100.4.22 10.100.4.23 )
# 集群所有的master Ip对应的主机
export MASTER_NAMES=(k8s-master1 k8s-master2 k8s-master3 )
# etcd 集群服务地址列表 
export ETCD_ENDPOINTS="https://10.100.4.21:2379,https://10.100.4.22:2379,https://10.100.4.23:2379"
# etcd 集群间通信的 IP 和端口
export ETCD_NODES="k8s-master1=https://10.100.4.21:2380,k8s-master2=https://10.100.4.22:2380,k8s-master3=https://10.100.4.23:2380"
# etcd 集群所有node ip
#定义ETCD集群的节点IP
export ETCD_NODE1="10.100.4.21"
export ETCD_NODE2="10.100.4.22"
export ETCD_NODE3="10.100.4.23"
#这个VIP地址是公用的
export ETCD_VIP="10.100.4.20"   
export ETCD_IPS=(10.100.4.21 10.100.4.22 10.100.4.23 )
# kube-apiserver 的反向代理(kube-nginx)地址端口
export KUBE_APISERVER="https://10.100.4.20:8443"
# 节点间互联网络接口名称
export IFACE="eth0"
# etcd 数据目录
export ETCD_DATA_DIR="/srv/data/k8s/etcd/data"
# etcd WAL 目录，建议是 SSD 磁盘分区，或者和 ETCD_DATA_DIR 不同的磁盘分区
export ETCD_WAL_DIR="/srv/data/k8s/etcd/wal"
# k8s 各组件数据目录
export K8S_DIR="/srv/data/k8s/k8s" 

#
# 以下配置不建议修改,除非你非常确定如何使用这些参数
#
# 最好使用 当前未用的网段 来定义服务网段和 Pod 网段
# 服务网段，部署前路由不可达，部署后集群内路由可达(kube-proxy 保证); 不建议修改
SERVICE_CIDR="10.254.0.0/16" 
# Pod 网段，建议 /16 段地址，部署前路由不可达，部署后集群内路由可达(flanneld 保证); 不建议修改
CLUSTER_CIDR="10.200.0.0/16" 
# 服务端口范围 (NodePort Range); 不建议修改
export NODE_PORT_RANGE="1024-32767"
# flanneld 网络配置前缀; 不建议修改
export FLANNEL_ETCD_PREFIX="/kubernetes/network" 
# kubernetes 服务 IP (一般是 SERVICE_CIDR 中第一个IP); 不建议修改
export CLUSTER_KUBERNETES_SVC_IP="10.254.0.1" 
# 集群 DNS 服务 IP (从 SERVICE_CIDR 中预分配); 不建议修改
export CLUSTER_DNS_SVC_IP="10.254.0.2"
# 集群 DNS 域名（末尾不带点号）
export CLUSTER_DNS_DOMAIN="cluster.local"
# 将二进制目录 /opt/k8s/bin 加到 PATH 中
export PATH=/opt/k8s/bin:$PATH
# 生成 EncryptionConfig 所需的加密 key
export ENCRYPTION_KEY=$(head -c 32 /dev/urandom | base64)
